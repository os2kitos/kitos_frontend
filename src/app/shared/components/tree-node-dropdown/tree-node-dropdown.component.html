<div *ngIf="itemParentIdsDictionary && sortedData">
  <div *ngIf="formGroup" [formGroup]="formGroup">
    <ng-select
      class="{{ size }}"
      [formControlName]="formName"
      [placeholder]="text"
      [items]="sortedData"
      [bindLabel]="textField"
      [loading]="loading || false"
      [clearAllText]="clearAllText"
      [loadingText]="loadingText"
      [notFoundText]="notFoundText"
      [searchFn]="searchWithItemParents"
      (search)="filter$.next($event.term)"
      (change)="formSelectionChange($event)"
      (clear)="filter$.next('')"
      ><ng-template ng-option-tmp let-item="item">
        <div
          [style.text-indent]="
            itemParentIdsDictionary[item.id] ? (itemParentIdsDictionary[item.id]!.length - 1) * 10 + 'px' : '0px'
          "
        >
          {{ item.name }}
        </div>
      </ng-template></ng-select
    >
  </div>
  <ng-select
    *ngIf="!formGroup"
    class="{{ size }}"
    [placeholder]="text"
    [items]="sortedData"
    [bindLabel]="textField"
    [loading]="loading || false"
    [readonly]="disabled"
    [clearAllText]="clearAllText"
    [loadingText]="loadingText"
    [notFoundText]="notFoundText"
    [(ngModel)]="value"
    [searchFn]="searchWithItemParents"
    (search)="filter$.next($event.term)"
    (change)="valueChange.emit($event)"
    (clear)="filter$.next('')"
    ><ng-template ng-option-tmp let-item="item">
      <div
        [style.text-indent]="
          itemParentIdsDictionary[item.id] ? (itemParentIdsDictionary[item.id]!.length - 1) * 10 + 'px' : '0px'
        "
      >
        {{ item.name }}
      </div>
    </ng-template>
  </ng-select>
</div>
<app-loading *ngIf="!itemParentIdsDictionary || !sortedData"></app-loading>
