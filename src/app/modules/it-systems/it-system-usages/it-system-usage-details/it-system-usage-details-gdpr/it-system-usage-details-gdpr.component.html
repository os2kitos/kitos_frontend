<app-general-info-section
  *ngIf="showGeneralInfo$ | async"
  (noPermissions)="disableFormsIfNoPermissions($event)"
  [disableLinkControl]="disableLinkControls"
></app-general-info-section>

<app-card *ngIf="showMoreInformation$ | async">
  <app-card-header title="Yderligere information" helpTextKey="it-system.usage.GDPR" i18n-title
    ><app-button
      secondary-content
      (buttonClick)="changeAllClick()"
      buttonStyle="secondary"
      data-cy="extra-header-button"
      >{{ expandAllButtonText$ | async }}</app-button
    ></app-card-header
  >
  <app-standard-vertical-content-grid>
    <app-data-sensitivity-section
      *ngIf="showDataTypes$ | async"
      (noPermissions)="disableFormsIfNoPermissions($event)"
      [isExpanded$]="dataSensitivityExpanded$"
      (expandedChanged)="expandedSectionChanged($event, 'data-sensitivity')"
      data-cy="data-sensitivity-accordion"
    ></app-data-sensitivity-section>
    <app-registered-data-categories-section
      *ngIf="registeredCategoriesEnabled$ | async"
      (noPermissions)="disableFormsIfNoPermissions($event)"
      [isExpanded$]="registeredCategoriesExpanded$"
      (expandedChanged)="expandedSectionChanged($event, 'registered-categories')"
      data-cy="registed-categories-accordion"
    ></app-registered-data-categories-section>
    <app-gdpr-technical-precautions-section
      *ngIf="technicalPrecautionsEnabled$ | async"
      (noPermissions)="disableFormsIfNoPermissions($event)"
      [disableLinkControl]="disableLinkControls"
      [isExpanded$]="technicalPrecautionsExpanded$"
      (expandedChanged)="expandedSectionChanged($event, 'technical-precautions')"
      data-cy="technical-precautions-accordion"
    ></app-gdpr-technical-precautions-section>
    <app-gdpr-user-supervision-section
      *ngIf="userSupervisionEnabled$ | async"
      (noPermissions)="disableFormsIfNoPermissions($event)"
      [isExpanded$]="userSupervisionExpanded$"
      (expandedChanged)="expandedSectionChanged($event, 'user-supervision')"
      data-cy="user-supervision-accordion"
    ></app-gdpr-user-supervision-section>
    <app-gdpr-risk-assessment-section
      *ngIf="showRiskAssessment$ | async"
      (noPermissions)="disableFormsIfNoPermissions($event)"
      [disableLinkControl]="disableLinkControls"
      [isExpanded$]="riskAssessmentExpanded$"
      (expandedChanged)="expandedSectionChanged($event, 'risk-assessment')"
      data-cy="risk-assessment-accordion"
    ></app-gdpr-risk-assessment-section>
    <app-gdpr-dpia-conducted-section
      *ngIf="showDpiaConducted$ | async"
      (noPermissions)="disableFormsIfNoPermissions($event)"
      [isExpanded$]="dpiaConductedExpanded$"
      (expandedChanged)="expandedSectionChanged($event, 'dpia-conducted')"
    ></app-gdpr-dpia-conducted-section>
    <app-gdpr-retention-period-section
      *ngIf="showRetentionPeriod$ | async"
      (noPermissions)="disableFormsIfNoPermissions($event)"
      [isExpanded$]="retentionPeriodExpanded$"
      (expandedChanged)="expandedSectionChanged($event, 'retention-period')"
    ></app-gdpr-retention-period-section>
  </app-standard-vertical-content-grid>
</app-card>
